'use strict';function cov_of4qs0djp(){var path="/home/hiroto/git/handson_nodejs/todo-data-storage/leveldb/index.js";var hash="9b637ae2b0fd0cd99c769b20a62e0f47f2f38e63";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/hiroto/git/handson_nodejs/todo-data-storage/leveldb/index.js",statementMap:{"0":{start:{line:3,column:14},end:{line:3,column:30}},"1":{start:{line:4,column:17},end:{line:4,column:32}},"2":{start:{line:7,column:11},end:{line:7,column:44}},"3":{start:{line:10,column:0},end:{line:17,column:1}},"4":{start:{line:11,column:17},end:{line:11,column:19}},"5":{start:{line:13,column:2},end:{line:15,column:3}},"6":{start:{line:14,column:4},end:{line:14,column:31}},"7":{start:{line:16,column:2},end:{line:16,column:16}},"8":{start:{line:20,column:0},end:{line:33,column:1}},"9":{start:{line:21,column:19},end:{line:21,column:21}},"10":{start:{line:23,column:2},end:{line:31,column:3}},"11":{start:{line:28,column:4},end:{line:30,column:5}},"12":{start:{line:32,column:2},end:{line:32,column:31}},"13":{start:{line:36,column:0},end:{line:41,column:10}},"14":{start:{line:36,column:25},end:{line:41,column:10}},"15":{start:{line:44,column:0},end:{line:65,column:3}},"16":{start:{line:45,column:2},end:{line:65,column:3}},"17":{start:{line:47,column:22},end:{line:47,column:41}},"18":{start:{line:48,column:22},end:{line:51,column:7}},"19":{start:{line:53,column:18},end:{line:53,column:71}},"20":{start:{line:56,column:6},end:{line:60,column:7}},"21":{start:{line:57,column:8},end:{line:59,column:63}},"22":{start:{line:61,column:6},end:{line:61,column:27}},"23":{start:{line:64,column:11},end:{line:64,column:52}},"24":{start:{line:68,column:2},end:{line:78,column:5}},"25":{start:{line:69,column:4},end:{line:78,column:5}},"26":{start:{line:70,column:17},end:{line:75,column:23}},"27":{start:{line:75,column:20},end:{line:75,column:22}},"28":{start:{line:77,column:13},end:{line:77,column:54}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:19},end:{line:10,column:20}},loc:{start:{line:10,column:31},end:{line:17,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:20,column:27},end:{line:20,column:28}},loc:{start:{line:20,column:46},end:{line:33,column:1}},line:20},"2":{name:"(anonymous_2)",decl:{start:{line:36,column:17},end:{line:36,column:18}},loc:{start:{line:36,column:25},end:{line:41,column:10}},line:36},"3":{name:"(anonymous_3)",decl:{start:{line:44,column:17},end:{line:44,column:18}},loc:{start:{line:45,column:2},end:{line:65,column:3}},line:45},"4":{name:"(anonymous_4)",decl:{start:{line:46,column:4},end:{line:46,column:5}},loc:{start:{line:46,column:15},end:{line:62,column:5}},line:46},"5":{name:"(anonymous_5)",decl:{start:{line:64,column:4},end:{line:64,column:5}},loc:{start:{line:64,column:11},end:{line:64,column:52}},line:64},"6":{name:"(anonymous_6)",decl:{start:{line:68,column:19},end:{line:68,column:20}},loc:{start:{line:69,column:4},end:{line:78,column:5}},line:69},"7":{name:"(anonymous_7)",decl:{start:{line:70,column:6},end:{line:70,column:7}},loc:{start:{line:70,column:17},end:{line:75,column:23}},line:70},"8":{name:"(anonymous_8)",decl:{start:{line:75,column:14},end:{line:75,column:15}},loc:{start:{line:75,column:20},end:{line:75,column:22}},line:75},"9":{name:"(anonymous_9)",decl:{start:{line:77,column:6},end:{line:77,column:7}},loc:{start:{line:77,column:13},end:{line:77,column:54}},line:77}},branchMap:{"0":{loc:{start:{line:56,column:6},end:{line:60,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:60,column:7}},{start:{line:56,column:6},end:{line:60,column:7}}],line:56},"1":{loc:{start:{line:64,column:11},end:{line:64,column:52}},type:"cond-expr",locations:[{start:{line:64,column:26},end:{line:64,column:30}},{start:{line:64,column:33},end:{line:64,column:52}}],line:64},"2":{loc:{start:{line:77,column:13},end:{line:77,column:54}},type:"cond-expr",locations:[{start:{line:77,column:28},end:{line:77,column:32}},{start:{line:77,column:35},end:{line:77,column:54}}],line:77}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9b637ae2b0fd0cd99c769b20a62e0f47f2f38e63"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_of4qs0djp=function(){return actualCoverage;};}return actualCoverage;}cov_of4qs0djp();const level=(cov_of4qs0djp().s[0]++,require('level'));const{join}=(cov_of4qs0djp().s[1]++,require('path'));// 同じディレクトリ内のleveldbディレクトリにデータベースの状態を保存
const db=(cov_of4qs0djp().s[2]++,level(join(__dirname,'leveldb')));// fetchAllの実装
cov_of4qs0djp().s[3]++;exports.fetchAll=async()=>{cov_of4qs0djp().f[0]++;const result=(cov_of4qs0djp().s[4]++,[]);cov_of4qs0djp().s[5]++;for await(const v of db.createValueStream({gt:'todo:',lt:'todo;'})){cov_of4qs0djp().s[6]++;result.push(JSON.parse(v));}cov_of4qs0djp().s[7]++;return result;};// fetchByCompletedの実装
cov_of4qs0djp().s[8]++;exports.fetchByCompleted=async completed=>{cov_of4qs0djp().f[1]++;const promises=(cov_of4qs0djp().s[9]++,[]);cov_of4qs0djp().s[10]++;for await(const id of db.createValueStream({// セカンダリインデックスの検索
gt:`todo-completed-${completed}:`,lt:`todo-completed-${completed};`})){cov_of4qs0djp().s[11]++;promises.push(db.get(`todo:${id}`).then(JSON.parse));}cov_of4qs0djp().s[12]++;return Promise.all(promises);};// createの実装
cov_of4qs0djp().s[13]++;exports.create=todo=>{cov_of4qs0djp().f[2]++;cov_of4qs0djp().s[14]++;return db.batch()// ToDoの保存
.put(`todo:${todo.id}`,JSON.stringify(todo))// セカンダリインデックスの保存
.put(`todo-completed-${todo.completed}:${todo.id}`,todo.id).write();};// updateの実装
cov_of4qs0djp().s[15]++;exports.update=(id,update)=>{cov_of4qs0djp().f[3]++;cov_of4qs0djp().s[16]++;return db.get(`todo:${id}`).then(content=>{cov_of4qs0djp().f[4]++;const oldTodo=(cov_of4qs0djp().s[17]++,JSON.parse(content));const newTodo=(cov_of4qs0djp().s[18]++,{...oldTodo,...update});let batch=(cov_of4qs0djp().s[19]++,db.batch().put(`todo:${id}`,JSON.stringify(newTodo)));// completedの値が変化した場合は、セカンダリインデックスも操作する
cov_of4qs0djp().s[20]++;if(oldTodo.completed!==newTodo.completed){cov_of4qs0djp().b[0][0]++;cov_of4qs0djp().s[21]++;batch=batch.del(`todo-completed-${oldTodo.completed}:${id}`).put(`todo-completed-${newTodo.completed}:${id}`,id);}else{cov_of4qs0djp().b[0][1]++;}cov_of4qs0djp().s[22]++;return batch.write();},// ToDoが存在しない場合はnullを返し、それ以外はエラーにする
err=>{cov_of4qs0djp().f[5]++;cov_of4qs0djp().s[23]++;return err.notFound?(cov_of4qs0djp().b[1][0]++,null):(cov_of4qs0djp().b[1][1]++,Promise.reject(err));});};// removeの実装
cov_of4qs0djp().s[24]++;exports.remove=id=>{cov_of4qs0djp().f[6]++;cov_of4qs0djp().s[25]++;return db.get(`todo:${id}`).then(content=>{cov_of4qs0djp().f[7]++;cov_of4qs0djp().s[26]++;return db.batch().del(`todo:${id}`).del(`todo-completed-true:${id}`).del(`todo-completed-false:${id}`).write().then(()=>{cov_of4qs0djp().f[8]++;cov_of4qs0djp().s[27]++;return id;});},// ToDoが存在しない場合はnullを返し、それ以外はそのままエラーにする
err=>{cov_of4qs0djp().f[9]++;cov_of4qs0djp().s[28]++;return err.notFound?(cov_of4qs0djp().b[2][0]++,null):(cov_of4qs0djp().b[2][1]++,Promise.reject(err));});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImxldmVsIiwicmVxdWlyZSIsImpvaW4iLCJkYiIsIl9fZGlybmFtZSIsImV4cG9ydHMiLCJmZXRjaEFsbCIsInJlc3VsdCIsInYiLCJjcmVhdGVWYWx1ZVN0cmVhbSIsImd0IiwibHQiLCJwdXNoIiwiSlNPTiIsInBhcnNlIiwiZmV0Y2hCeUNvbXBsZXRlZCIsImNvbXBsZXRlZCIsInByb21pc2VzIiwiaWQiLCJnZXQiLCJ0aGVuIiwiUHJvbWlzZSIsImFsbCIsImNyZWF0ZSIsInRvZG8iLCJiYXRjaCIsInB1dCIsInN0cmluZ2lmeSIsIndyaXRlIiwidXBkYXRlIiwiY29udGVudCIsIm9sZFRvZG8iLCJuZXdUb2RvIiwiZGVsIiwiZXJyIiwibm90Rm91bmQiLCJyZWplY3QiLCJyZW1vdmUiXSwibWFwcGluZ3MiOiJBQUFBLGEsKzlJQWVZO3lGQWJaLEtBQU1BLENBQUFBLEtBQUsseUJBQUdDLE9BQU8sQ0FBQyxPQUFELENBQVYsQ0FBWCxDQUNBLEtBQU0sQ0FBRUMsSUFBRiwwQkFBV0QsT0FBTyxDQUFDLE1BQUQsQ0FBbEIsQ0FBTixDQUVBO0FBQ0EsS0FBTUUsQ0FBQUEsRUFBRSx5QkFBR0gsS0FBSyxDQUFDRSxJQUFJLENBQUNFLFNBQUQsQ0FBWSxTQUFaLENBQUwsQ0FBUixDQUFSLENBRUE7dUJBQ0FDLE9BQU8sQ0FBQ0MsUUFBUixDQUFtQixTQUFZLHdCQUM3QixLQUFNQyxDQUFBQSxNQUFNLHlCQUFHLEVBQUgsQ0FBWixDQUQ2Qix1QkFHN0IsVUFBVyxLQUFNQyxDQUFBQSxDQUFqQixHQUFzQkwsQ0FBQUEsRUFBRSxDQUFDTSxpQkFBSCxDQUFxQixDQUFFQyxFQUFFLENBQUUsT0FBTixDQUFlQyxFQUFFLENBQUUsT0FBbkIsQ0FBckIsQ0FBdEIsQ0FBMEUsd0JBQ3hFSixNQUFNLENBQUNLLElBQVAsQ0FBWUMsSUFBSSxDQUFDQyxLQUFMLENBQVdOLENBQVgsQ0FBWixFQUNELENBTDRCLHVCQU03QixNQUFPRCxD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UmUsR0FGUSxDQUVILHVCQUFzQmYsRUFBRyxFQUZ0QixFQUdSZSxHQUhRLENBR0gsd0JBQXVCZixFQUFHLEVBSHZCLEVBSVJVLEtBSlEsR0FLUlIsSUFMUSxDQUtILElBQU1GLHNEQUFBQSxDQUFBQSxFQUFFLEVBTEwsRUFLTSxDQU5uQixDQU9FO0FBQ0FnQixHQUFHLEVBQUksc0RBQUFBLENBQUFBLEdBQUcsQ0FBQ0MsUUFBSiw0QkFBZSxJQUFmLDZCQUFzQmQsT0FBTyxDQUFDZSxNQUFSLENBQWVGLEdBQWYsQ0FBdEIsRUFBeUMsQ0FSbEQsRUFTQyxDQVZIIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBsZXZlbCA9IHJlcXVpcmUoJ2xldmVsJyk7XG5jb25zdCB7IGpvaW4gfSA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuLy8g5ZCM44GY44OH44Kj44Os44Kv44OI44Oq5YaF44GubGV2ZWxkYuODh+OCo+ODrOOCr+ODiOODquOBq+ODh+ODvOOCv+ODmeODvOOCueOBrueKtuaFi+OCkuS/neWtmFxuY29uc3QgZGIgPSBsZXZlbChqb2luKF9fZGlybmFtZSwgJ2xldmVsZGInKSk7XG5cbi8vIGZldGNoQWxs44Gu5a6f6KOFXG5leHBvcnRzLmZldGNoQWxsID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCByZXN1bHQgPSBbXTtcblxuICBmb3IgYXdhaXQgKGNvbnN0IHYgb2YgZGIuY3JlYXRlVmFsdWVTdHJlYW0oeyBndDogJ3RvZG86JywgbHQ6ICd0b2RvOycgfSkpIHtcbiAgICByZXN1bHQucHVzaChKU09OLnBhcnNlKHYpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBmZXRjaEJ5Q29tcGxldGVk44Gu5a6f6KOFXG5leHBvcnRzLmZldGNoQnlDb21wbGV0ZWQgPSBhc3luYyBjb21wbGV0ZWQgPT4ge1xuICBjb25zdCBwcm9taXNlcyA9IFtdO1xuXG4gIGZvciBhd2FpdCAoY29uc3QgaWQgb2YgZGIuY3JlYXRlVmFsdWVTdHJlYW0oe1xuICAgIC8vIOOCu+OCq+ODs+ODgOODquOCpOODs+ODh+ODg+OCr+OCueOBruaknOe0olxuICAgIGd0OiBgdG9kby1jb21wbGV0ZWQtJHtjb21wbGV0ZWR9OmAsXG4gICAgbHQ6IGB0b2RvLWNvbXBsZXRlZC0ke2NvbXBsZXRlZH07YFxuICB9KSkge1xuICAgIHByb21pc2VzLnB1c2goXG4gICAgICBkYi5nZXQoIGB0b2RvOiR7aWR9YCkudGhlbihKU09OLnBhcnNlKVxuICAgIClcbiAgfVxuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufVxuXG4vLyBjcmVhdGXjga7lrp/oo4VcbmV4cG9ydHMuY3JlYXRlID0gdG9kbyA9PiBkYi5iYXRjaCgpXG4gIC8vIFRvRG/jga7kv53lrZhcbiAgLnB1dChgdG9kbzoke3RvZG8uaWR9YCwgSlNPTi5zdHJpbmdpZnkodG9kbykpXG4gIC8vIOOCu+OCq+ODs+ODgOODquOCpOODs+ODh+ODg+OCr+OCueOBruS/neWtmFxuICAucHV0KGB0b2RvLWNvbXBsZXRlZC0ke3RvZG8uY29tcGxldGVkfToke3RvZG8uaWR9YCwgdG9kby5pZClcbiAgLndyaXRlKClcblxuLy8gdXBkYXRl44Gu5a6f6KOFXG5leHBvcnRzLnVwZGF0ZSA9IChpZCwgdXBkYXRlKSA9PlxuICBkYi5nZXQoYHRvZG86JHtpZH1gKS50aGVuKFxuICAgIGNvbnRlbnQgPT4ge1xuICAgICAgY29uc3Qgb2xkVG9kbyA9IEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgICBjb25zdCBuZXdUb2RvID0ge1xuICAgICAgICAuLi5vbGRUb2RvLFxuICAgICAgICAuLi51cGRhdGVcbiAgICAgIH07XG5cbiAgICAgIGxldCBiYXRjaCA9IGRiLmJhdGNoKCkucHV0KGB0b2RvOiR7aWR9YCwgSlNPTi5zdHJpbmdpZnkobmV3VG9kbykpO1xuXG4gICAgICAvLyBjb21wbGV0ZWTjga7lgKTjgYzlpInljJbjgZfjgZ/loLTlkIjjga/jgIHjgrvjgqvjg7Pjg4Djg6rjgqTjg7Pjg4fjg4Pjgq/jgrnjgoLmk43kvZzjgZnjgotcbiAgICAgIGlmIChvbGRUb2RvLmNvbXBsZXRlZCAhPT0gbmV3VG9kby5jb21wbGV0ZWQpIHtcbiAgICAgICAgYmF0Y2ggPSBiYXRjaFxuICAgICAgICAgIC5kZWwoYHRvZG8tY29tcGxldGVkLSR7b2xkVG9kby5jb21wbGV0ZWR9OiR7aWR9YClcbiAgICAgICAgICAucHV0KGB0b2RvLWNvbXBsZXRlZC0ke25ld1RvZG8uY29tcGxldGVkfToke2lkfWAsIGlkKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGJhdGNoLndyaXRlKCk7XG4gICAgfSxcbiAgICAvLyBUb0Rv44GM5a2Y5Zyo44GX44Gq44GE5aC05ZCI44GvbnVsbOOCkui/lOOBl+OAgeOBneOCjOS7peWkluOBr+OCqOODqeODvOOBq+OBmeOCi1xuICAgIGVyciA9PiBlcnIubm90Rm91bmQgPyBudWxsIDogUHJvbWlzZS5yZWplY3QoZXJyKVxuICApXG5cbiAgLy8gcmVtb3Zl44Gu5a6f6KOFXG4gIGV4cG9ydHMucmVtb3ZlID0gaWQgPT5cbiAgICBkYi5nZXQoYHRvZG86JHtpZH1gKS50aGVuKFxuICAgICAgY29udGVudCA9PiBkYi5iYXRjaCgpXG4gICAgICAgIC5kZWwoYHRvZG86JHtpZH1gKVxuICAgICAgICAuZGVsKGB0b2RvLWNvbXBsZXRlZC10cnVlOiR7aWR9YClcbiAgICAgICAgLmRlbChgdG9kby1jb21wbGV0ZWQtZmFsc2U6JHtpZH1gKVxuICAgICAgICAud3JpdGUoKVxuICAgICAgICAudGhlbigoKSA9PiBpZCksXG4gICAgICAvLyBUb0Rv44GM5a2Y5Zyo44GX44Gq44GE5aC05ZCI44GvbnVsbOOCkui/lOOBl+OAgeOBneOCjOS7peWkluOBr+OBneOBruOBvuOBvuOCqOODqeODvOOBq+OBmeOCi1xuICAgICAgZXJyID0+IGVyci5ub3RGb3VuZCA/IG51bGwgOiBQcm9taXNlLnJlamVjdChlcnIpXG4gICAgKVxuIl19